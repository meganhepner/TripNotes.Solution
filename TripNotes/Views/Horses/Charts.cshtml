@model TripNotes.Models.HorseRace

@{
  Layout = "_Layout";
}

<div class="form-horizontal">  
    <div class="row">  
        <div class="col-md-12">  
            <div class="col-md-12">  
                <div class="form-group">  
                    <div class="col-md-12">  
                        <table class="table table-bordered table-responsive">  
                            <thead>  
                                <tr>  
                                    <th scope="col">  
                                        <label class="control-label">Horse</label>  
                                    </th>  
                                    <th scope="col">  
                                        <label class="control-label">FPS 1 Call</label>  
                                    </th>  
                                    <th scope="col">  
                                        <label class="control-label">FPS 2 Call</label>  
                                    </th>  
                                    <th scope="col">  
                                        <label class="control-label">FPS 3 Call</label>  
                                    </th>  
                                    <th scope="col">  
                                        <label class="control-label">E Pace</label>  
                                    </th>  
                                </tr>  
                            </thead>  
                            <tbody>  
                                <tr>  
                                    <th scope="row">  
                                        <input type="text" class="form-control horseName" />  
                                    </th>  
                                    <th scope="row">  
                                        <input type="text" class="form-control FPS1" />  
                                    </th>  
                                    <th scope="row">  
                                        <input type="text" class="form-control FPS2" />  
                                    </th>  
                                    <th scope="row">  
                                        <input type="text" class="form-control FPS3" />  
                                    </th>  
                                    <th scope="row">  
                                        <input type="text" class="form-control EPace" />  
                                    </th>  
                                </tr> 
                                <input class="btnAdd" type="button" name="name" value="Add A Horse To This Race" />
                                <button type="button" class="btnTest">Display Charts</button>
                                <input type="button" value="Return To Horse List" onclick="location.href='@Url.Action("Index", "Horses")'" /> 
                                <br>
                                <br>
                            </tbody>  
                        </table>  
                    </div>  
                </div>  
            </div>  
        </div>  
    </div>  
</div>  

<div class="containerChart">  
      <canvas id="firstFrac"> </canvas>  
</div>

<div class="containerChart">    
      <canvas id="secFrac"> </canvas>  
</div> 

<div class="containerChart">   
      <canvas id="thirdFrac"> </canvas>  
</div> 

<div class="containerChart">  
      <canvas id="earlyPace"> </canvas>  
</div> 


  <script id="template" type="text/template"> 
      <tr>  
        <th scope="row">  
            <input type="text" class="form-control horseName" />  
        </th>  
        <th scope="row">  
            <input type="text" class="form-control FPS1" />  
        </th>  
        <th scope="row">  
            <input type="text" class="form-control FPS2" />  
        </th>  
        <th scope="row">  
            <input type="text" class="form-control FPS3" />  
        </th>  
        <th scope="row">  
            <input type="text" class="form-control EPace" />  
        </th>  
    </tr>  
  </script>

@section scripts{
  <script type="text/javascript">

    $(document).ready(function() {
    
      $(".btnAdd").click(function() {
          $(".table").append($("#template").html());
        });

      $('.btnTest').click(function getHorseData() {
        var horseName = horseNameArray();  
        var FPS1 = fps1Array();  
        var FPS2 = fps2Array();  
        var FPS3 = fps3Array();  
        var ePace = ePaceArray();  

        var ctx = document.getElementById('firstFrac').getContext('2d');
        var chart = new Chart(ctx, {
        type: 'horizontalBar',
        data: {
            labels: horseName,
            datasets: [{
                label: 'Feet Per Second First Call',
                backgroundColor: ["#845EC2", "#2C73D2", "#D65DB1","#FF6F91","#FF9671","#008F7A","#FFC75F", "#F9F871"],
                borderColor: 'rgb(255, 99, 132)',
                order: 1,
                data: FPS1
            }]
        },
          options: {
            legend: {
              labels: {
                fontColor: "black",
                fontSize: 18
              }
            },               
            scales: {  
              yAxes: [{
                ticks: {
                  fontColor: "black",
                  fontSize: 18
                }
              }],
              xAxes: [{  
                ticks: {  
                  fontColor: "black",
                  fontSize: 18,
                  min: 48
                }  
              }],  
            }
          }  
        });

  var ctx = document.getElementById('secFrac').getContext('2d');
        var chart = new Chart(ctx, {
        type: 'horizontalBar',
        data: {
            labels: horseName,
            datasets: [{
                label: 'Feet Per Second Second Call',
                backgroundColor: ["#845EC2", "#2C73D2", "#D65DB1","#FF6F91","#FF9671","#008F7A","#FFC75F", "#F9F871"],
                borderColor: 'rgb(255, 99, 132)',
                order: 1,
                data: FPS2
            }]
        },
          options: {
            legend: {
              labels: {
                fontColor: "black",
                fontSize: 18
              }
            },               
            scales: {  
              yAxes: [{
                ticks: {
                  fontColor: "black",
                  fontSize: 18
                }
              }],
              xAxes: [{  
                ticks: {  
                  fontColor: "black",
                  fontSize: 18,
                  min: 48
                }  
              }],  
            }
          }  
        });

      var ctx = document.getElementById('thirdFrac').getContext('2d');
        var chart = new Chart(ctx, {
        type: 'horizontalBar',
        data: {
            labels: horseName,
            datasets: [{
                label: 'Feet Per Second Third Call',
                backgroundColor: ["#845EC2", "#2C73D2", "#D65DB1","#FF6F91","#FF9671","#008F7A","#FFC75F", "#F9F871"],
                borderColor: 'rgb(255, 99, 132)',
                order: 1,
                data: FPS3
            }]
        },
          options: {
            legend: {
              labels: {
                fontColor: "black",
                fontSize: 18
              }
            },               
            scales: {  
              yAxes: [{
                ticks: {
                  fontColor: "black",
                  fontSize: 18
                }
              }],
              xAxes: [{  
                ticks: {  
                  fontColor: "black",
                  fontSize: 18,
                  min: 48
                }  
              }],  
            }
          }  
        });

    var ctx = document.getElementById('earlyPace').getContext('2d');
        var chart = new Chart(ctx, {
        type: 'horizontalBar',
        data: {
            labels: horseName,
            datasets: [{
                label: 'Early Pace',
                backgroundColor: ["#845EC2", "#2C73D2", "#D65DB1","#FF6F91","#FF9671","#008F7A","#FFC75F", "#F9F871"],
                borderColor: 'rgb(255, 99, 132)',
                order: 1,
                data: ePace
            }]
        },
          options: {
            legend: {
              labels: {
                fontColor: "black",
                fontSize: 18
              }
            },               
            scales: {  
              yAxes: [{
                ticks: {
                  fontColor: "black",
                  fontSize: 18
                }
              }],
              xAxes: [{  
                ticks: {  
                  fontColor: "black",
                  fontSize: 18,
                  min: 48
                }  
              }],  
            }
          }  
        });

        function horseNameArray() {
        var data = [];
        $('.horseName').each(function() {
          var horseName = $(this).val();  
          data.push(horseName);
        }); 
        return data;
        };

        function fps1Array() {
        var data = [];
        $('.FPS1').each(function() {
          var FPS1 = $(this).val();  
          data.push(FPS1);
        }); 
        return data;
        };

        function fps2Array() {
        var data = [];
        $('.FPS2').each(function() {
          var FPS2 = $(this).val();  
          data.push(FPS2);
        }); 
        return data;
        };

        function fps3Array() {
        var data = [];
        $('.FPS3').each(function() {
          var FPS3 = $(this).val();  
          data.push(FPS3);
        }); 
        return data;
        };

        function ePaceArray() {
        var data = [];
        $('.EPace').each(function() {
          var ePace = $(this).val();  
          data.push(ePace);
        }); 
        return data;
        };

        function avgPaceArray() {
        var data = [];
        $('.AvgPace').each(function() {
          var avgPace = $(this).val();  
          data.push(avgPace);
        }); 
        return data;
        };
      });
    });
  </script>
}
